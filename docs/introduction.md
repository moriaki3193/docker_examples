# Dockerいろいろ入門

## TL;DR
- コンテナと仮想環境は別物

### コンテナとは？
> Virtual MachineはPCの電源をつけてから消すまでをシミュレートするが
> Containerは `service httpd start` のような一つのコマンドのみをシミュレートする

Docker上にMongo DBを立てれば、そのアプリケーションだけをコンテナとして別の環境に切り分けることが可能になる。

> 「ある前提となる状態のもとで、あるコマンドを叩いた時に発生する処理の内容を再現するもの」

### Dockerのメリット
+ コンテナの再現性
  + 「ある前提となる状態のもとで、あるコマンドを叩いた時に発生する処理の内容を再現」
  + 『前提の状態』は、コンテナが動く環境がMacだろうがUbuntuだろうが、Dockerfileにより統一されている
+ コンテナイメージはリポジトリで管理可能
  + インフラの環境をバージョン管理できる
  + コンテナには動作状況自体が含まれているため、ロールバックを確実に行うことが可能

### イメージ図
以下の図の点線部分がコンテナとなる。

![Qiita](https://camo.qiitausercontent.com/db04577e8708dd39bf6acec877d791aeeea90931/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3130323138322f66633738623434622d346266622d653433652d616264612d3466316430613063353166622e706e67)

#### 実際の構成
![Structure](https://camo.qiitausercontent.com/f48caa31ae9a18f05249dd277ef7d0795578057e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3130323138322f64623338623864392d316331632d653663342d643335382d6363346535613039336438382e706e67)

### Dockerfile by example
1. CentOS 6.5で
2. yum経由でhttpdをインストールし
3. `cat /etc/httpd/conf/httpd.conf` とコマンドを打った時の処理を再現する

```Dockerfile
FROM centos:6.5
RUN yum install -y httpd
CMD ["cat", "/etc/httpd/conf/httpd.conf"]
```
